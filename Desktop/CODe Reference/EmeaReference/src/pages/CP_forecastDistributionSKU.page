<apex:page controller="CP_forecastSKUDistributionController">
    <style type="text/css"> 
        .inlineEditWriteOn{background:url(/img/func_icons/util/pencil12.gif) no-repeat right 2px} 
        .inlineEditDiv input[type=text]{max-width: 50px}
        
        .rowTotal {
        	font-weight: bold;
        	background-color: #E4E4E4;
        }
        .locked {
        	background-color: #F2F3F3;
        }
        hr {
		    border: 0;
		    height: 2px;
		    background-color: #e4e4e4;
		    margin-bottom: 12px;
        }
        #tmp {
        	border: 0;
        	margin: 0;
        	padding: 0;
        }
    </style>
    <apex:form >

      <div>
          
         <apex:pageBlock >
            <apex:actionStatus onstart="loading(true)" onstop="loading(false)" id="loadStatus"/>
            <div>
               <apex:outputLabel value="{!$Label.CP_Fiscal_Year}" style="font-weight:bold; "/>
               <apex:inputField value="{!aplFY.PICK_Forecast_Fiscal_Year__c}" required="true">
                  <apex:actionSupport event="onchange" action="{!getData}" onsubmit="loading(true)" oncomplete="loading(false)" reRender="forecastPreview, forecastEditable"/>
               </apex:inputField>
            </div>
         </apex:pageBlock>
         <div id="contentLoading" style="display:none;">
            <div style="text-align: center;">
               <img src="/img/loading.gif" alt="Loading graphic" />
            </div>
         </div>
         <div id="contentLoaded">
            <apex:pageBlock mode="detail" id="forecastPreview1" title="{!$Label.Forecast_actual_distribution}" rendered="{!forecastpreview.size > 0 && country.Units_of_Measurement__c == 'Basic Units'}">
               <div style="text-align:right" >
                  <apex:pageBlockTable value="{!listaPintarForecast}" var="item" >
                     <apex:column headerValue="SKU" width="500" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputText value="{!IF(NOT(item.total), item.elemForecast.product, item.name)}" />
                    </apex:column>
                     <apex:column headerValue="{!previousFY}-09" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputField value="{!item.elemForecast.forecastSeptember.NUM_Forecast_SKU__c}" />
                     </apex:column>
                     <apex:column headerValue="{!previousFY}-10" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputField value="{!item.elemForecast.forecastOctober.NUM_Forecast_SKU__c}" />
                     </apex:column>
                     <apex:column headerValue="{!previousFY}-11" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputField value="{!item.elemForecast.forecastNovember.NUM_Forecast_SKU__c}" />
                     </apex:column>
                     <apex:column headerValue="{!previousFY}-12" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputField value="{!item.elemForecast.forecastDecember.NUM_Forecast_SKU__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-01" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputField value="{!item.elemForecast.forecastJanuary.NUM_Forecast_SKU__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-02" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputField value="{!item.elemForecast.forecastFebruary.NUM_Forecast_SKU__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-03" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputField value="{!item.elemForecast.forecastMarch.NUM_Forecast_SKU__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-04" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputField value="{!item.elemForecast.forecastApril.NUM_Forecast_SKU__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-05" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputField value="{!item.elemForecast.forecastMay.NUM_Forecast_SKU__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-06" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputField value="{!item.elemForecast.forecastJune.NUM_Forecast_SKU__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-07" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputField value="{!item.elemForecast.forecastJuly.NUM_Forecast_SKU__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-08" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputField value="{!item.elemForecast.forecastAugust.NUM_Forecast_SKU__c}" />
                     </apex:column>
                     <apex:column headerValue="{!$Label.Forecast_Total_Units}" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputText value="{!ROUND(item.elemForecast.totalUnits, 0)}" />
                     </apex:column>
                     <apex:column headerValue="{!$Label.Forecast_Total_Rels}" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputText value="{!ROUND(item.elemForecast.totalRels, 0)}" />
                     </apex:column>
                  </apex:pageBlockTable>
               </div>
            </apex:pageBlock>
            
            <apex:pageBlock mode="detail" id="forecastPreview2" title="{!$Label.Forecast_actual_distribution_Rel}" rendered="{!forecastpreview.size > 0 && country.Units_of_Measurement__c == 'Rels'}">
               <div style="text-align:right" >
                  <apex:pageBlockTable value="{!listaPintarForecast}" var="item">
                     <apex:column headerValue="SKU" width="500" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputText value="{!IF(NOT(item.total), item.elemForecast.product, item.name)}" />
                    </apex:column>
                     <apex:column headerValue="{!previousFY}-09" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastSeptember.NUM_Forecast_SKU_Rel__c}" />
                     </apex:column>
                     <apex:column headerValue="{!previousFY}-10" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastOctober.NUM_Forecast_SKU_Rel__c}" />
                     </apex:column>
                     <apex:column headerValue="{!previousFY}-11" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastNovember.NUM_Forecast_SKU_Rel__c}" />
                     </apex:column>
                     <apex:column headerValue="{!previousFY}-12" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastDecember.NUM_Forecast_SKU_Rel__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-01" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastJanuary.NUM_Forecast_SKU_Rel__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-02" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastFebruary.NUM_Forecast_SKU_Rel__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-03" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastMarch.NUM_Forecast_SKU_Rel__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-04" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastApril.NUM_Forecast_SKU_Rel__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-05" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastMay.NUM_Forecast_SKU_Rel__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-06" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastJune.NUM_Forecast_SKU_Rel__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-07" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastJuly.NUM_Forecast_SKU_Rel__c}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-08" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastAugust.NUM_Forecast_SKU_Rel__c}" />
                     </apex:column>
                     <apex:column headerValue="{!$Label.Forecast_Total_Units}" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputText value="{!ROUND(item.elemForecast.totalUnits, 0)}" />
                     </apex:column>
                     <apex:column headerValue="{!$Label.Forecast_Total_Rels}" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                     	<apex:outputText value="{!ROUND(item.elemForecast.totalRels, 0)}" />
                     </apex:column>
                  </apex:pageBlockTable>
               </div>
            </apex:pageBlock>            
         </div>
         
         <div id="contentPreview">
            <apex:pageBlock mode="inlineEdit" id="forecastEditable" title="{!$Label.Closed_sales} {!IF(day(Today())>VALUE($Label.CP_day), DATE(IF(month(Today())=12, Year(Today())+1, Year(Today())), IF(month(Today())=12, 1, month(Today())+1), 1), DATE(Year(Today()), month(Today()),1))} {!$Label.Forecast_distribution_preview}" rendered="{!forecastEditable.size > 0 && country.Units_of_Measurement__c == 'Basic Units'}">
               <div id="contentLoadingPreview" style="display:none;">
                  <div style="text-align: center;">
                     <img src="/img/loading.gif" alt="Loading graphic" />
                  </div>
               </div>
               <div id="contentLoadedPreview1" style="text-align:right">
                  <apex:detail inlineEdit="true"/>
                  
                  <apex:pageBlockTable id="forecastEditablePreview1" value="{!listaPintarForecast}" var="item">
                     <!-- PRODUCT -->
                     <apex:column headerValue="SKU"  width="500" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputText value="{!IF(NOT(item.total), item.elemForecast.product, item.name)}" />
                     </apex:column>
                    
                    <!-- SEPTEMBER: FUTURE PERIOD -->
                     <apex:column headerValue="{!previousFY}-09" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&&(MONTH(TODAY())>9 || (MONTH(TODAY())=9&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastSeptember.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastSeptember.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true , false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <!-- FAMILTY TOTAL -->
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastSeptember.NUM_Forecast_SKU__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <!-- SEPTEMBER: LOCKED PERIOD -->
                     <apex:column headerValue="{!previousFY}-09" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&&(MONTH(TODAY())>9 || (MONTH(TODAY())=9&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastSeptember.NUM_Forecast_SKU__c, 0)}" />
                     </apex:column>
                     
                     <!-- OCTOBER -->
                     <apex:column headerValue="{!previousFY}-10" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&&(MONTH(TODAY())>10 || (MONTH(TODAY())=10 &&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastOctober.NUM_Forecast_SKU__c}"  rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}" ><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastOctober.NUM_Forecast_SKU__c}"  rendered="{!IF(isDevice == 'true' && NOT(item.total), true , false)}" ><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastOctober.NUM_Forecast_SKU__c, 0)}" rendered="{!item.total}" />               
                     </apex:column>
                     <apex:column headerValue="{!previousFY}-10" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&&(MONTH(TODAY())>10 || (MONTH(TODAY())=10&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastOctober.NUM_Forecast_SKU__c, 0)}" />
                     </apex:column>
                     
                     <!-- NOVEMBER -->
                     <apex:column headerValue="{!previousFY}-11" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&&(MONTH(TODAY())>11 || (MONTH(TODAY())=11&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastNovember.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastNovember.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastNovember.NUM_Forecast_SKU__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!previousFY}-11" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&&(MONTH(TODAY())>11 || (MONTH(TODAY())=11&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastNovember.NUM_Forecast_SKU__c, 0)}" />
                     </apex:column>
                     
                     <!-- DECEMBER -->
                     <apex:column headerValue="{!previousFY}-12" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY && (MONTH(TODAY())>12 || (MONTH(TODAY())=12&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastDecember.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastDecember.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastDecember.NUM_Forecast_SKU__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!previousFY}-12" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&&(MONTH(TODAY())>12 || (MONTH(TODAY())=12&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastDecember.NUM_Forecast_SKU__c, 0)}" />
                     </apex:column>
                     
                     <!-- JANUARY -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-01" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c && (MONTH(TODAY())>1 || (MONTH(TODAY())=1 && DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastJanuary.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastJanuary.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastJanuary.NUM_Forecast_SKU__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-01" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" width="75" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&& (MONTH(TODAY())>1 || (MONTH(TODAY())=1&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastJanuary.NUM_Forecast_SKU__c, 0)}" />
                     </apex:column>
                     
                     <!-- FEBRUARY -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-02" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c ))|| (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c && (MONTH(TODAY())>2 || (MONTH(TODAY())=2&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastFebruary.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastFebruary.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastFebruary.NUM_Forecast_SKU__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-02" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c && (MONTH(TODAY())>2 || (MONTH(TODAY())=2&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastFebruary.NUM_Forecast_SKU__c, 0)}" />
                     </apex:column>
                     
                     <!-- MARCH -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-03" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c && (MONTH(TODAY())>3 || (MONTH(TODAY())=3&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastMarch.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>                        
                        <apex:outputField value="{!item.elemForecast.forecastMarch.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastMarch.NUM_Forecast_SKU__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-03 " width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c && (MONTH(TODAY())>3 || (MONTH(TODAY())=3&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastMarch.NUM_Forecast_SKU__c, 0)}" />
                     </apex:column>
                     
                     <!-- APRIL -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-04" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c && (MONTH(TODAY())>4 || (MONTH(TODAY())=4&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastApril.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastApril.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}" ><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastApril.NUM_Forecast_SKU__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-04" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c && (MONTH(TODAY())>4 || (MONTH(TODAY())=4&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastApril.NUM_Forecast_SKU__c, 0)}" />
                     </apex:column>
                     
                     <!-- MAY -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-05" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>5 || (MONTH(TODAY())=5&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastMay.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastMay.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastMay.NUM_Forecast_SKU__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-05" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c ))|| (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>5 || (MONTH(TODAY())=5&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastMay.NUM_Forecast_SKU__c, 0)}" />
                     </apex:column>
                     
                     <!-- JUNE -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-06" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>6 || (MONTH(TODAY())=6&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastJune.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastJune.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastJune.NUM_Forecast_SKU__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-06" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>6 || (MONTH(TODAY())=6&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastJune.NUM_Forecast_SKU__c, 0)}" />
                     </apex:column>
                     
                     <!-- JULY -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-07" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>7 || (MONTH(TODAY())=7&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastJuly.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastJuly.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastJuly.NUM_Forecast_SKU__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-07" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>7 || (MONTH(TODAY())=7&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastJuly.NUM_Forecast_SKU__c, 0)}" />
                     </apex:column>
                     
                     <!-- AUGUST -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-08" width="75" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>8 || (MONTH(TODAY())=8&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastAugust.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastAugust.NUM_Forecast_SKU__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastAugust.NUM_Forecast_SKU__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-08" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>8 || (MONTH(TODAY())=8&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastAugust.NUM_Forecast_SKU__c, 0)}" />
                     </apex:column>
                     
                     <!-- SUM ALL PERIODS -->
                     <apex:column headerValue="{!$Label.Forecast_Total_Units}" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputText value="{!ROUND(item.elemForecast.totalUnits, 0)}" />
                     </apex:column>
                     <apex:column headerValue="{!$Label.Forecast_Total_Rels}" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputText value="{!ROUND(item.elemForecast.totalRels, 0)}" />
                     </apex:column>
                  </apex:pageBlockTable>
                 </div>
             </apex:PageBlock>               
                      
             <apex:pageBlock mode="inlineEdit" id="forecastEditable2" title="{!$Label.Forecast_actual_distribution_Rel}" rendered="{!forecastEditable.size > 0 && country.Units_of_Measurement__c == 'Rels'}">
               <div id="contentLoadingPreview" style="display:none;">
                  <div style="text-align: center;">
                     <img src="/img/loading.gif" alt="Loading graphic" />
                  </div>
               </div>
               <div id="contentLoadedPreview2" style="text-align:right">
                  <apex:detail inlineEdit="true"/>
                  <apex:pageBlockTable id="forecastEditablePreview2" value="{!listaPintarForecast}" var="item">
                  	 <!-- PRODUCT -->
                     <apex:column headerValue="SKU"  width="500" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputText value="{!IF(NOT(item.total), item.elemForecast.product, item.name)}" />
                     </apex:column>
                     
                     <!-- SEPTEMBER: FUTURE PERIOD -->
                     <apex:column headerValue="{!previousFY}-09" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&&(MONTH(TODAY())>9 || (MONTH(TODAY())=9&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastSeptember.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastSeptember.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true , false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <!-- FAMILY TOTALS -->
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastSeptember.NUM_Forecast_SKU_Rel__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <!-- SEPTEMBER: LOCKED PERIOD -->
                     <apex:column headerValue="{!previousFY}-09" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY && (MONTH(TODAY())>9 || (MONTH(TODAY())=9&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastSeptember.NUM_Forecast_SKU_Rel__c, 0)}" />
                     </apex:column>
                     
                     <!-- OCTOBER -->
                     <apex:column headerValue="{!previousFY}-10" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&&(MONTH(TODAY())>10 || (MONTH(TODAY())=10&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastOctober.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastOctober.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true , false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastOctober.NUM_Forecast_SKU_Rel__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!previousFY}-10" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&&(MONTH(TODAY())>10 || (MONTH(TODAY())=10&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastOctober.NUM_Forecast_SKU_Rel__c, 0)}" />
                     </apex:column>
                     
                     <!-- NOVEMBER -->
                     <apex:column headerValue="{!previousFY}-11" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&&(MONTH(TODAY())>11 || (MONTH(TODAY())=11&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastNovember.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastNovember.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastNovember.NUM_Forecast_SKU_Rel__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!previousFY}-11" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&& (MONTH(TODAY())>11 || (MONTH(TODAY())=11&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastNovember.NUM_Forecast_SKU_Rel__c, 0)}" />
                     </apex:column>
                     
                     <!-- DECEMBER -->
                     <apex:column headerValue="{!previousFY}-12" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&&(MONTH(TODAY())>12 || (MONTH(TODAY())=12&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastDecember.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastDecember.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastDecember.NUM_Forecast_SKU_Rel__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!previousFY}-12" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(TEXT(YEAR(TODAY()))!=previousFY || (TEXT(YEAR(TODAY()))=previousFY&& (MONTH(TODAY())>12 || (MONTH(TODAY())=12&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastDecember.NUM_Forecast_SKU_Rel__c, 0)}" />
                     </apex:column>
                     
                     <!-- JANUARY -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-01" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>1 || (MONTH(TODAY())=1&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastJanuary.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastJanuary.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastJanuary.NUM_Forecast_SKU_Rel__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-01" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" width="75" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&& (MONTH(TODAY())>1 || (MONTH(TODAY())=1&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastJanuary.NUM_Forecast_SKU_Rel__c, 0)}" />
                     </apex:column>
                     
                     <!-- FEBRUARY -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-02" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>2 || (MONTH(TODAY())=2&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastFebruary.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastFebruary.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastFebruary.NUM_Forecast_SKU_Rel__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-02" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&& (MONTH(TODAY())>2 || (MONTH(TODAY())=2&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastFebruary.NUM_Forecast_SKU_Rel__c, 0)}" />
                     </apex:column>
                     
                     <!-- MARCH -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-03" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>3 || (MONTH(TODAY())=3&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastMarch.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>                        
                        <apex:outputField value="{!item.elemForecast.forecastMarch.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastMarch.NUM_Forecast_SKU_Rel__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-03" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&& (MONTH(TODAY())>3 || (MONTH(TODAY())=3&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastMarch.NUM_Forecast_SKU_Rel__c, 0)}" />
                     </apex:column>
                     
                     <!-- APRIL -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-04" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>4 || (MONTH(TODAY())=4&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastApril.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastApril.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastApril.NUM_Forecast_SKU_Rel__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-04" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&& (MONTH(TODAY())>4 || (MONTH(TODAY())=4&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastApril.NUM_Forecast_SKU_Rel__c, 0)}" />
                     </apex:column>
                     
                     <!-- MAY -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-05" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>5 || (MONTH(TODAY())=5&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastMay.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastMay.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastMay.NUM_Forecast_SKU_Rel__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-05" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&& (MONTH(TODAY())>5 || (MONTH(TODAY())=5&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastMay.NUM_Forecast_SKU_Rel__c, 0)}" />
                     </apex:column>
                     
                     <!-- JUNE -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-06" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>6 || (MONTH(TODAY())=6&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastJune.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastJune.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastJune.NUM_Forecast_SKU_Rel__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-06" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&& (MONTH(TODAY())>6 || (MONTH(TODAY())=6&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastJune.NUM_Forecast_SKU_Rel__c, 0)}" />
                     </apex:column>
                     
                     <!-- JULY -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-07" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>7 || (MONTH(TODAY())=7&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}">
                        <apex:outputField value="{!item.elemForecast.forecastJuly.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastJuly.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastJuly.NUM_Forecast_SKU_Rel__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-07" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&& (MONTH(TODAY())>7 || (MONTH(TODAY())=7&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastJuly.NUM_Forecast_SKU_Rel__c, 0)}" />
                     </apex:column>
                     
                     <!-- AUGUST -->
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-08" width="75" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&&(MONTH(TODAY())>8 || (MONTH(TODAY())=8&&DAY(TODAY())>VALUE($Label.CP_day)))), false, true)}" styleClass="{!IF(item.total, 'rowTotal', '')}">
                        <apex:outputField value="{!item.elemForecast.forecastAugust.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'false' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="ondblclick"/></apex:outputField>
                        <apex:outputField value="{!item.elemForecast.forecastAugust.NUM_Forecast_SKU_Rel__c}" rendered="{!IF(isDevice == 'true' && NOT(item.total), true, false)}"><apex:inlineEditSupport event="onmouseover"/></apex:outputField>
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastAugust.NUM_Forecast_SKU_Rel__c, 0)}" rendered="{!item.total}" />
                     </apex:column>
                     <apex:column headerValue="{!aplFY.PICK_Forecast_Fiscal_Year__c}-08" width="75" styleClass="{!IF(item.total, 'rowTotal', 'locked')}" rendered="{!IF(((MONTH(TODAY())>=9 && TEXT(YEAR(TODAY()))!=previousFY ) ||(MONTH(TODAY())<9 && TEXT(YEAR(TODAY()))!=aplFY.PICK_Forecast_Fiscal_Year__c )) || (TEXT(YEAR(TODAY()))=aplFY.PICK_Forecast_Fiscal_Year__c&& (MONTH(TODAY())>8 || (MONTH(TODAY())=8&&DAY(TODAY())>VALUE($Label.CP_day)))), true, false)}">
                        <apex:outputText value="{!ROUND(item.elemForecast.forecastAugust.NUM_Forecast_SKU_Rel__c, 0)}" />
                     </apex:column>
                     
                     <!-- SUM ALL PERIODS -->
                     <apex:column headerValue="{!$Label.Forecast_Total_Units}" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputText value="{!ROUND(item.elemForecast.totalUnits, 0)}" />
                     </apex:column>
                     <apex:column headerValue="{!$Label.Forecast_Total_Rels}" width="75" styleClass="{!IF(item.total, 'rowTotal', '')}" >
                        <apex:outputText value="{!ROUND(item.elemForecast.totalRels, 0)}" />
                     </apex:column>
                  </apex:pageBlockTable>
                 </div>
               </apex:pageBlock>
               <div style="margin-top:20px; text-align:center">
                  <hr/>
                  <apex:commandButton styleClass="saveBtn" value="{!$Label.Save_Forecast}" onclick="if(!confirm('{!$Label.CP_Save_Alert}')){return false}; loadingPreview(true); saveForecastF(); return false;" />
                  <apex:actionFunction action="{!saveForecastSKU}" name="saveForecastF" reRender="forecastEditablePreview1, forecastEditablePreview2" oncomplete="loadingPreview(false)" />
               </div>
            
         </div>
      </div>
   </apex:form>
	<apex:includeScript value="{!$Resource.jQuery}"/>
	<apex:includeScript value="{!URLFOR($Resource.jQuery_chosen,'chosen.jquery.min.js')}" />
	<apex:includeScript id="a" value="https://www.google.com/jsapi" />
   <script type="text/javascript">
      function loading(val) {
          if(val) {
              document.getElementById('contentLoading').style.display = 'block';
              document.getElementById('contentLoaded').style.display = 'none';
              document.getElementById('contentPreview').style.display = 'none';
              
          }
          else 
          {
              document.getElementById('contentLoading').style.display = 'none';
              document.getElementById('contentLoaded').style.display = 'block';
              document.getElementById('contentPreview').style.display = 'block';
          }
      }
      function loadingPreview(val)
      {
          if(val)
          {
            if('{!country.Units_of_Measurement__c}' == 'Basic Units') var DivHeight = $('#contentLoadedPreview1').height() - 16;
            else var DivHeight = $('#contentLoadedPreview2').height() - 16;
            
            document.getElementById('contentLoadingPreview').style.display = 'block';
            if('{!country.Units_of_Measurement__c}' == 'Basic Units') document.getElementById('contentLoadedPreview1').style.display = 'none';
            else document.getElementById('contentLoadedPreview2').style.display = 'none';
            
            $('#contentLoadingPreview').before('<div id="tmp" style="height: ' + DivHeight +'px"></div>');
            $('.saveBtn').prop('disabled', 'disabled').addClass('btnDisabled');
          }
          else
          {
          	$('#tmp').remove();
            document.getElementById('contentLoadingPreview').style.display = 'none';
            if('{!country.Units_of_Measurement__c}' == 'Basic Units') document.getElementById('contentLoadedPreview1').style.display = 'block';
            else document.getElementById('contentLoadedPreview2').style.display = 'block';
            $('.saveBtn').prop('disabled', '').removeClass('btnDisabled');
          }
      }
   </script>
</apex:page>